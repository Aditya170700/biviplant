import{C as K,D as y,s as P,f as a,b as r,w as m,u as l,a as e,q as M,e as c,E as _,G as S,F as g,l as h,c as D,j as k,k as v,o as d,t as p,H as I,L as w}from"./app.7cdc33b8.js";import{_ as O}from"./Header.d3be3ee0.js";import{S as j}from"./Sidebar.3bfa4cf9.js";import{_ as B}from"./Footer.f9a03d02.js";import{S as J}from"./SpinnerProcessing.5dcb7549.js";import{s as T,a as H,b as E,c as F,d as G,O as Q}from"./geosearch.module.d4da31a8.js";const R=["content"],W=["content"],X={class:"page-content-wrapper"},Y={class:"container"},Z={class:"profile-wrapper-area py-3"},ee={class:"card"},te={class:"card-body p-4"},se={class:"d-flex align-items-center justify-content-between mb-3"},oe=e("span",{class:"h6"},"Tambah Alamat",-1),ie=e("i",{class:"lni lni-arrow-left me-2"},null,-1),le=["onSubmit"],de={class:"row"},ne=e("div",{class:"col-lg-12 py-2"},[e("hr")],-1),ae={class:"col-1g-12 py-2"},re={style:{height:"50vh",width:"100%","z-index":"1 !important"}},ce={key:0,class:"collapse show",style:{width:"205px"}},ue={class:"card card-body rounded-0 border border-dark p-0"},me=["onClick"],_e={key:0},pe={class:"col-6 mb-3"},be={class:"mb-3"},ge=e("label",{for:"longitude",class:"form-label"},"Longitude",-1),he={class:"col-6 mb-3"},ve={class:"mb-3"},fe=e("label",{for:"latitude",class:"form-label"},"Latitude",-1),ye={class:"col-6 mb-3"},Se={class:"mb-3"},ke=e("label",{for:"receiver",class:"form-label"},"Nama Penerima",-1),we={class:"col-6 mb-3"},xe={class:"mb-3"},Ve=e("label",{for:"phone",class:"form-label"},"No HP",-1),Ce={class:"col-12 mb-3"},$e=e("label",{for:"province_id",class:"form-label"},"Provinsi",-1),ze=["value"],Ae={class:"col-12 mb-3"},Ue=e("label",{for:"city_id",class:"form-label"},"Kabupaten / Kota",-1),Le=["value"],Ne={class:"col-12 mb-3"},qe=e("label",{for:"subdistrict_id",class:"form-label"},"Kecamatan",-1),Ke=["value"],Pe={class:"col-12 mb-3"},Me={class:"mb-3"},De=e("label",{for:"postal_code",class:"form-label"},"Kode Pos",-1),Ie={class:"col-12 mb-3"},Oe={class:"mb-3"},je=e("label",{for:"detail",class:"form-label"},"Alamat Detail",-1),Be={class:"col-6"},Je={class:"d-grid"},Te=["disabled"],He={class:"d-flex justify-content-center align-items-center"},Ee=e("span",null,[e("i",{class:"lni lni-save me-2"}),v("Simpan")],-1),Fe={class:"col-6"},Ge={class:"d-grid"},Qe=e("i",{class:"lni lni-arrow-left me-2"},null,-1),Re=e("div",{class:"internet-connection-status",id:"internetStatus"},null,-1),it={__name:"Create",setup(We){let f=K(),b=y({zoom:5});JSON.parse(localStorage.getItem("address"));const t=y({province_id:"",city_id:"",subdistrict_id:"",subdistrict:{id:"",name:"",city:{id:"",name:"",province:{id:"",name:""}}},longitude:0,latitude:0,receiver:"",phone:"",postal_code:"",detail:"",processing:!1,is_primary:0});let n=y({provinces:[],cities:[],subdistricts:[],searchAddress:[],preview:null}),x=()=>{axios.get("/api/provinces").then(i=>{n.provinces=i.data.data}).catch(i=>{console.log(i)})},V=i=>{t.subdistrict.city.province.id=i,t.subdistrict.city.province.name=document.querySelector("#province_id").options[document.querySelector("#province_id").selectedIndex].text,axios.get("/api/cities",{params:{province_id:i}}).then(s=>{n.cities=s.data.data}).catch(s=>{console.log(s)})},C=i=>{t.subdistrict.city.id=i,t.subdistrict.city.name=document.querySelector("#city_id").options[document.querySelector("#city_id").selectedIndex].text,axios.get("/api/subdistricts",{params:{city_id:i}}).then(s=>{n.subdistricts=s.data.data}).catch(s=>{console.log(s)})},$=i=>{t.subdistrict.id=i,t.subdistrict.name=document.querySelector("#subdistrict_id").options[document.querySelector("#subdistrict_id").selectedIndex].text};function z(){navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>{t.latitude=i.coords.latitude,t.longitude=i.coords.longitude}):console.log("Geolocation is not supported by this browser.")}P(()=>{x(),z()});function A(i){let s=i.target.getLatLng();t.longitude=s.lng,t.latitude=s.lat}function U(i){t.longitude=i.latlng.lng,t.latitude=i.latlng.lat}function L(i){new Q().search({query:i.target.value}).then(o=>{n.searchAddress=o})}function N(i,s){t.longitude=s,t.latitude=i,n.searchAddress=[]}function q(){let i=localStorage.getItem("address")!=null?JSON.parse(localStorage.getItem("address")):[];i.push(JSON.stringify(t)),t.processing=!0,localStorage.setItem("address",JSON.stringify(i)),t.processing=!1,window.location.href="/address-guest"}return(i,s)=>(d(),a("div",null,[r(l(I),null,{default:m(()=>[e("title",null,p(l(f).metaTitle),1),e("meta",{"head-key":"description",name:"description",content:l(f).metaDescription},null,8,R),e("meta",{"head-key":"keyword",name:"keyword",content:l(f).metaKeyword},null,8,W)]),_:1}),r(O),r(j),e("div",X,[e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[e("div",se,[oe,r(l(w),{href:i.route("address-guest.index"),class:"btn btn-sm btn-outline-secondary"},{default:m(()=>[ie,v("Kembali ")]),_:1},8,["href"])]),e("form",{onSubmit:M(q,["prevent"])},[e("div",de,[ne,e("div",ae,[e("div",re,[r(l(G),{modelValue:l(b).zoom,"onUpdate:modelValue":s[0]||(s[0]=o=>l(b).zoom=o),zoom:l(b).zoom,"onUpdate:zoom":s[1]||(s[1]=o=>l(b).zoom=o),center:[t.latitude,t.longitude],onClick:U},{default:m(()=>[r(l(T),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r(l(H),{position:"topright"},{default:m(()=>[e("input",{onKeyup:L,type:"text",placeholder:"Cari...",style:{width:"100%"}},null,32),l(n).searchAddress.length>0?(d(),a("div",ce,[e("div",ue,[(d(!0),a(g,null,h(l(n).searchAddress,(o,u)=>(d(),a("p",{style:{cursor:"pointer"},key:u,onClick:Xe=>N(o.y,o.x)},p(o.label),9,me))),128)),l(n).searchAddress<1?(d(),a("p",_e," Alamat tidak ditemukan ")):k("",!0)])])):k("",!0)]),_:1}),r(l(E),{"lat-lng":[t.latitude,t.longitude],draggable:"",onMoveend:A},{default:m(()=>[r(l(F),null,{default:m(()=>[v(p(`Lat: ${t.latitude} Lng: ${t.longitude}`),1)]),_:1})]),_:1},8,["lat-lng"])]),_:1},8,["modelValue","zoom","center"])])]),e("div",pe,[e("div",be,[ge,c(e("input",{class:"form-control",id:"longitude","onUpdate:modelValue":s[2]||(s[2]=o=>t.longitude=o),disabled:""},null,512),[[_,t.longitude]])])]),e("div",he,[e("div",ve,[fe,c(e("input",{class:"form-control",id:"latitude","onUpdate:modelValue":s[3]||(s[3]=o=>t.latitude=o),disabled:""},null,512),[[_,t.latitude]])])]),e("div",ye,[e("div",Se,[ke,c(e("input",{class:"form-control",id:"receiver","onUpdate:modelValue":s[4]||(s[4]=o=>t.receiver=o)},null,512),[[_,t.receiver]])])]),e("div",we,[e("div",xe,[Ve,c(e("input",{class:"form-control",id:"sender","onUpdate:modelValue":s[5]||(s[5]=o=>t.phone=o)},null,512),[[_,t.phone]])])]),e("div",Ce,[$e,c(e("select",{class:"form-control mb-3","onUpdate:modelValue":s[6]||(s[6]=o=>t.province_id=o),id:"province_id",onChange:s[7]||(s[7]=o=>l(V)(t.province_id))},[(d(!0),a(g,null,h(l(n).provinces,(o,u)=>(d(),a("option",{value:o.id,key:u},p(o.name),9,ze))),128))],544),[[S,t.province_id]])]),e("div",Ae,[Ue,c(e("select",{class:"form-control mb-3","onUpdate:modelValue":s[8]||(s[8]=o=>t.city_id=o),id:"city_id",onChange:s[9]||(s[9]=o=>l(C)(t.city_id))},[(d(!0),a(g,null,h(l(n).cities,(o,u)=>(d(),a("option",{value:o.id,key:u},p(o.name),9,Le))),128))],544),[[S,t.city_id]])]),e("div",Ne,[qe,c(e("select",{class:"form-control mb-3","onUpdate:modelValue":s[10]||(s[10]=o=>t.subdistrict_id=o),id:"subdistrict_id",onChange:s[11]||(s[11]=o=>l($)(t.subdistrict_id))},[(d(!0),a(g,null,h(l(n).subdistricts,(o,u)=>(d(),a("option",{value:o.id,key:u},p(o.name),9,Ke))),128))],544),[[S,t.subdistrict_id]])]),e("div",Pe,[e("div",Me,[De,c(e("input",{class:"form-control",id:"postal_code","onUpdate:modelValue":s[12]||(s[12]=o=>t.postal_code=o)},null,512),[[_,t.postal_code]])])]),e("div",Ie,[e("div",Oe,[je,c(e("textarea",{class:"form-control",id:"detail",rows:"3","onUpdate:modelValue":s[13]||(s[13]=o=>t.detail=o)},null,512),[[_,t.detail]])])]),e("div",Be,[e("div",Je,[e("button",{class:"btn btn-success rounded-custom",disabled:t.processing},[e("div",He,[t.processing?(d(),D(J,{key:0,color:"text-white",size:"sm",me:"me-2"})):k("",!0),Ee])],8,Te)])]),e("div",Fe,[e("div",Ge,[r(l(w),{href:i.route("address-guest.index"),class:"btn btn-outline-secondary rounded-custom"},{default:m(()=>[Qe,v("Kembali ")]),_:1},8,["href"])])])])],40,le)])])])])]),Re,r(B)]))}};export{it as default};
