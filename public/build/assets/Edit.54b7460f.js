import{C as O,D as F,g as J,s as Q,f as c,b as u,w as b,u as e,a as t,q as R,e as m,E as h,c as _,j as a,G as x,F as y,l as k,k as w,o as d,t as v,H as W,L as j,z as X}from"./app.982608ae.js";import{_ as Y}from"./Header.8faac16e.js";import{S as Z}from"./Sidebar.c72865c7.js";import{_ as ee}from"./Footer.b68b957e.js";import{F as p}from"./FormText.6c4399ca.js";import{S as te}from"./SpinnerProcessing.77a69ef5.js";import{s as se,a as oe,b as ie,c as le,d as de,O as re}from"./geosearch.module.14e7ae8c.js";import"./_plugin-vue_export-helper.cdc0426e.js";const ae=["content"],ne=["content"],ce={class:"page-content-wrapper"},ue={class:"container"},_e={class:"profile-wrapper-area py-3"},me={class:"card"},pe={class:"card-body p-4"},ge={class:"d-flex align-items-center justify-content-between mb-3"},be=t("span",{class:"h6"},"Ubah Alamat",-1),he=t("i",{class:"lni lni-arrow-left me-2"},null,-1),ve=["onSubmit"],fe={class:"row"},ye=t("div",{class:"col-lg-12 py-2"},[t("hr")],-1),ke={class:"col-1g-12 py-2"},we={style:{height:"50vh",width:"100%","z-index":"1 !important"}},xe={key:0,class:"collapse show",style:{width:"205px"}},Ve={class:"card card-body rounded-0 border border-dark p-0"},ze=["onClick"],Ue={key:0},$e={class:"col-6 mb-3"},Ae={class:"mb-3"},Ce=t("label",{for:"longitude",class:"form-label"},"Longitude",-1),Se={class:"col-6 mb-3"},Le={class:"mb-3"},Ke=t("label",{for:"latitude",class:"form-label"},"Latitude",-1),Pe={class:"col-6 mb-3"},Me={class:"mb-3"},Ne=t("label",{for:"receiver",class:"form-label"},"Nama Penerima",-1),De={class:"col-6 mb-3"},Fe={class:"mb-3"},je=t("label",{for:"phone",class:"form-label"},"No HP",-1),Be={class:"col-12 mb-3"},Te=t("label",{for:"province_id",class:"form-label"},"Provinsi",-1),Ee=["value"],He={class:"col-12 mb-3"},qe=t("label",{for:"city_id",class:"form-label"},"Kabupaten / Kota",-1),Ge=["value"],Ie={class:"col-12 mb-3"},Oe=t("label",{for:"subdistrict_id",class:"form-label"},"Kecamatan",-1),Je=["value"],Qe={class:"col-12 mb-3"},Re={class:"mb-3"},We=t("label",{for:"postal_code",class:"form-label"},"Kode Pos",-1),Xe={class:"col-12 mb-3"},Ye={class:"mb-3"},Ze=t("label",{for:"detail",class:"form-label"},"Alamat Detail",-1),et={class:"col-6"},tt={class:"d-grid"},st=["disabled"],ot={class:"d-flex justify-content-center align-items-center"},it=t("span",null,[t("i",{class:"lni lni-save me-2"}),w("Simpan")],-1),lt={class:"col-6"},dt={class:"d-grid"},rt=t("i",{class:"lni lni-arrow-left me-2"},null,-1),at=t("div",{class:"internet-connection-status",id:"internetStatus"},null,-1),ft={__name:"Edit",setup(nt){var U,$,A,C,S,L,K,P,M,N,D;let r=O(),f=F({zoom:5});const s=J({id:(U=r.result.id)!=null?U:"",province_id:($=r.result.subdistrict.city.province_id)!=null?$:"",city_id:(A=r.result.subdistrict.city_id)!=null?A:"",user_id:(C=r.result.user_id)!=null?C:"",subdistrict_id:(S=r.result.subdistrict_id)!=null?S:"",longitude:(L=r.result.longitude)!=null?L:0,latitude:(K=r.result.latitude)!=null?K:0,receiver:(P=r.result.receiver)!=null?P:"",phone:(M=r.result.phone)!=null?M:"",postal_code:(N=r.result.postal_code)!=null?N:"",detail:(D=r.result.detail)!=null?D:""});let n=F({provinces:[],cities:[],subdistricts:[],searchAddress:[],preview:null}),B=()=>{axios.get("/api/provinces").then(l=>{n.provinces=l.data.data}).catch(l=>{console.log(l)})},V=l=>{axios.get("/api/cities",{params:{province_id:l}}).then(o=>{n.cities=o.data.data}).catch(o=>{console.log(o)})},z=l=>{axios.get("/api/subdistricts",{params:{city_id:l}}).then(o=>{n.subdistricts=o.data.data}).catch(o=>{console.log(o)})};function T(){navigator.geolocation?navigator.geolocation.getCurrentPosition(l=>{s.latitude=l.coords.latitude,s.longitude=l.coords.longitude}):console.log("Geolocation is not supported by this browser.")}Q(()=>{B(),V(s.province_id),z(s.city_id),T()});function E(l){let o=l.target.getLatLng();s.longitude=o.lng,s.latitude=o.lat}function H(l){s.longitude=l.latlng.lng,s.latitude=l.latlng.lat}function q(l){new re().search({query:l.target.value}).then(i=>{n.searchAddress=i})}function G(l,o){s.longitude=o,s.latitude=l,n.searchAddress=[]}function I(){let l=s.data();X.Inertia.post(route("address.update",l.id),{_method:"put",...l})}return(l,o)=>(d(),c("div",null,[u(e(W),null,{default:b(()=>[t("title",null,v(e(r).metaTitle),1),t("meta",{"head-key":"description",name:"description",content:e(r).metaDescription},null,8,ae),t("meta",{"head-key":"keyword",name:"keyword",content:e(r).metaKeyword},null,8,ne)]),_:1}),u(Y),u(Z),t("div",ce,[t("div",ue,[t("div",_e,[t("div",me,[t("div",pe,[t("div",ge,[be,u(e(j),{href:l.route("address.index"),class:"btn btn-sm btn-outline-secondary"},{default:b(()=>[he,w("Kembali ")]),_:1},8,["href"])]),t("form",{onSubmit:R(I,["prevent"])},[t("div",fe,[ye,t("div",ke,[t("div",we,[u(e(de),{modelValue:e(f).zoom,"onUpdate:modelValue":o[0]||(o[0]=i=>e(f).zoom=i),zoom:e(f).zoom,"onUpdate:zoom":o[1]||(o[1]=i=>e(f).zoom=i),center:[e(s).latitude,e(s).longitude],onClick:H},{default:b(()=>[u(e(se),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),u(e(oe),{position:"topright"},{default:b(()=>[t("input",{onKeyup:q,type:"text",placeholder:"Cari...",style:{width:"100%"}},null,32),e(n).searchAddress.length>0?(d(),c("div",xe,[t("div",Ve,[(d(!0),c(y,null,k(e(n).searchAddress,(i,g)=>(d(),c("p",{style:{cursor:"pointer"},key:g,onClick:ct=>G(i.y,i.x)},v(i.label),9,ze))),128)),e(n).searchAddress<1?(d(),c("p",Ue," Alamat tidak ditemukan ")):a("",!0)])])):a("",!0)]),_:1}),u(e(ie),{"lat-lng":[e(s).latitude,e(s).longitude],draggable:"",onMoveend:E},{default:b(()=>[u(e(le),null,{default:b(()=>[w(v(`Lat: ${e(s).latitude} Lng: ${e(s).longitude}`),1)]),_:1})]),_:1},8,["lat-lng"])]),_:1},8,["modelValue","zoom","center"])])]),t("div",$e,[t("div",Ae,[Ce,m(t("input",{class:"form-control",id:"longitude","onUpdate:modelValue":o[2]||(o[2]=i=>e(s).longitude=i),disabled:""},null,512),[[h,e(s).longitude]]),e(s).errors.longitude?(d(),_(p,{key:0,id:"longitude",message:e(s).errors.longitude},null,8,["message"])):a("",!0)])]),t("div",Se,[t("div",Le,[Ke,m(t("input",{class:"form-control",id:"latitude","onUpdate:modelValue":o[3]||(o[3]=i=>e(s).latitude=i),disabled:""},null,512),[[h,e(s).latitude]]),e(s).errors.latitude?(d(),_(p,{key:0,id:"latitude",message:e(s).errors.latitude},null,8,["message"])):a("",!0)])]),t("div",Pe,[t("div",Me,[Ne,m(t("input",{class:"form-control",id:"receiver","onUpdate:modelValue":o[4]||(o[4]=i=>e(s).receiver=i)},null,512),[[h,e(s).receiver]]),e(s).errors.receiver?(d(),_(p,{key:0,id:"receiver",message:e(s).errors.receiver},null,8,["message"])):a("",!0)])]),t("div",De,[t("div",Fe,[je,m(t("input",{class:"form-control",id:"sender","onUpdate:modelValue":o[5]||(o[5]=i=>e(s).phone=i)},null,512),[[h,e(s).phone]]),e(s).errors.phone?(d(),_(p,{key:0,id:"phone",message:e(s).errors.phone},null,8,["message"])):a("",!0)])]),t("div",Be,[Te,m(t("select",{class:"form-control mb-3","onUpdate:modelValue":o[6]||(o[6]=i=>e(s).province_id=i),id:"province_id",onChange:o[7]||(o[7]=i=>e(V)(e(s).province_id))},[(d(!0),c(y,null,k(e(n).provinces,(i,g)=>(d(),c("option",{value:i.id,key:g},v(i.name),9,Ee))),128))],544),[[x,e(s).province_id]]),e(s).errors.province_id?(d(),_(p,{key:0,id:"province_id",message:e(s).errors.province_id},null,8,["message"])):a("",!0)]),t("div",He,[qe,m(t("select",{class:"form-control mb-3","onUpdate:modelValue":o[8]||(o[8]=i=>e(s).city_id=i),id:"city_id",onChange:o[9]||(o[9]=i=>e(z)(e(s).city_id))},[(d(!0),c(y,null,k(e(n).cities,(i,g)=>(d(),c("option",{value:i.id,key:g},v(i.name),9,Ge))),128))],544),[[x,e(s).city_id]]),e(s).errors.city_id?(d(),_(p,{key:0,id:"city_id",message:e(s).errors.city_id},null,8,["message"])):a("",!0)]),t("div",Ie,[Oe,m(t("select",{class:"form-control mb-3","onUpdate:modelValue":o[10]||(o[10]=i=>e(s).subdistrict_id=i),id:"subdistrict_id"},[(d(!0),c(y,null,k(e(n).subdistricts,(i,g)=>(d(),c("option",{value:i.id,key:g},v(i.name),9,Je))),128))],512),[[x,e(s).subdistrict_id]]),e(s).errors.subdistrict_id?(d(),_(p,{key:0,id:"subdistrict_id",message:e(s).errors.subdistrict_id},null,8,["message"])):a("",!0)]),t("div",Qe,[t("div",Re,[We,m(t("input",{class:"form-control",id:"postal_code","onUpdate:modelValue":o[11]||(o[11]=i=>e(s).postal_code=i)},null,512),[[h,e(s).postal_code]]),e(s).errors.postal_code?(d(),_(p,{key:0,id:"postal_code",message:e(s).errors.postal_code},null,8,["message"])):a("",!0)])]),t("div",Xe,[t("div",Ye,[Ze,m(t("textarea",{class:"form-control",id:"detail",rows:"3","onUpdate:modelValue":o[12]||(o[12]=i=>e(s).detail=i)},null,512),[[h,e(s).detail]]),e(s).errors.detail?(d(),_(p,{key:0,id:"detail",message:e(s).errors.detail},null,8,["message"])):a("",!0)])]),t("div",et,[t("div",tt,[t("button",{class:"btn btn-success rounded-custom",disabled:e(s).processing},[t("div",ot,[e(s).processing?(d(),_(te,{key:0,color:"text-white",size:"sm",me:"me-2"})):a("",!0),it])],8,st)])]),t("div",lt,[t("div",dt,[u(e(j),{href:l.route("address.index"),class:"btn btn-outline-secondary rounded-custom"},{default:b(()=>[rt,w("Kembali ")]),_:1},8,["href"])])])])],40,ve)])])])])]),at,u(ee)]))}};export{ft as default};
