import{C as P,D as y,s as M,f as a,b as r,w as m,u as e,a as t,q as O,e as c,E as _,G as S,F as g,l as h,c as D,j as k,k as f,o as d,t as p,H as I,L as V}from"./app.e65afa29.js";import{_ as J}from"./Header.109a62e2.js";import{S as j}from"./Sidebar.5a0def6c.js";import{_ as B}from"./Footer.49ad8333.js";import{S as E}from"./SpinnerProcessing.cdcfca10.js";import{s as H,a as T,b as F,c as G,d as Q,O as R}from"./geosearch.module.d291b447.js";const W=["content"],X=["content"],Y={class:"page-content-wrapper"},Z={class:"container"},tt={class:"profile-wrapper-area py-3"},et={class:"card"},st={class:"card-body p-4"},ot={class:"d-flex align-items-center justify-content-between mb-3"},it=t("span",{class:"h6"},"Ubah Alamat",-1),lt=t("i",{class:"lni lni-arrow-left me-2"},null,-1),dt=["onSubmit"],nt={class:"row"},at=t("div",{class:"col-lg-12 py-2"},[t("hr")],-1),rt={class:"col-1g-12 py-2"},ct={style:{height:"50vh",width:"100%","z-index":"1 !important"}},ut={key:0,class:"collapse show",style:{width:"205px"}},mt={class:"card card-body rounded-0 border border-dark p-0"},_t=["onClick"],pt={key:0},bt={class:"col-6 mb-3"},gt={class:"mb-3"},ht=t("label",{for:"longitude",class:"form-label"},"Longitude",-1),ft={class:"col-6 mb-3"},vt={class:"mb-3"},yt=t("label",{for:"latitude",class:"form-label"},"Latitude",-1),St={class:"col-6 mb-3"},kt={class:"mb-3"},wt=t("label",{for:"receiver",class:"form-label"},"Nama Penerima",-1),xt={class:"col-6 mb-3"},Vt={class:"mb-3"},$t=t("label",{for:"phone",class:"form-label"},"No HP",-1),Ct={class:"col-12 mb-3"},Ut=t("label",{for:"province_id",class:"form-label"},"Provinsi",-1),zt=["value"],At={class:"col-12 mb-3"},Nt=t("label",{for:"city_id",class:"form-label"},"Kabupaten / Kota",-1),Lt=["value"],qt={class:"col-12 mb-3"},Kt=t("label",{for:"subdistrict_id",class:"form-label"},"Kecamatan",-1),Pt=["value"],Mt={class:"col-12 mb-3"},Ot={class:"mb-3"},Dt=t("label",{for:"postal_code",class:"form-label"},"Kode Pos",-1),It={class:"col-12 mb-3"},Jt={class:"mb-3"},jt=t("label",{for:"detail",class:"form-label"},"Alamat Detail",-1),Bt={class:"col-6"},Et={class:"d-grid"},Ht=["disabled"],Tt={class:"d-flex justify-content-center align-items-center"},Ft=t("span",null,[t("i",{class:"lni lni-save me-2"}),f("Simpan")],-1),Gt={class:"col-6"},Qt={class:"d-grid"},Rt=t("i",{class:"lni lni-arrow-left me-2"},null,-1),Wt=t("div",{class:"internet-connection-status",id:"internetStatus"},null,-1),le={__name:"Edit",setup(Xt){let v=P(),b=y({zoom:5}),$=JSON.parse(localStorage.getItem("address")),s=y(JSON.parse($[route().params.id])),n=y({provinces:[],cities:[],subdistricts:[],searchAddress:[],preview:null}),C=()=>{axios.get("/api/provinces").then(l=>{n.provinces=l.data.data,w(s.subdistrict.city.province.id,!0)}).catch(l=>{console.log(l)})},w=(l,i=!1)=>{i||(s.subdistrict.city.province.id=l,s.subdistrict.city.province.name=document.querySelector("#province_id").options[document.querySelector("#province_id").selectedIndex].text),axios.get("/api/cities",{params:{province_id:l}}).then(o=>{n.cities=o.data.data,i&&x(s.subdistrict.city.id,!0)}).catch(o=>{console.log(o)})},x=(l,i=!1)=>{i||(s.subdistrict.city.id=l,s.subdistrict.city.name=document.querySelector("#city_id").options[document.querySelector("#city_id").selectedIndex].text),axios.get("/api/subdistricts",{params:{city_id:l}}).then(o=>{n.subdistricts=o.data.data}).catch(o=>{console.log(o)})},U=l=>{s.subdistrict.id=l,s.subdistrict.name=document.querySelector("#subdistrict_id").options[document.querySelector("#subdistrict_id").selectedIndex].text};function z(){navigator.geolocation?navigator.geolocation.getCurrentPosition(l=>{s.latitude=l.coords.latitude,s.longitude=l.coords.longitude}):console.log("Geolocation is not supported by this browser.")}M(()=>{C(),z()});function A(l){let i=l.target.getLatLng();s.longitude=i.lng,s.latitude=i.lat}function N(l){s.longitude=l.latlng.lng,s.latitude=l.latlng.lat}function L(l){new R().search({query:l.target.value}).then(o=>{n.searchAddress=o})}function q(l,i){s.longitude=i,s.latitude=l,n.searchAddress=[]}function K(){let l=localStorage.getItem("address")!=null?JSON.parse(localStorage.getItem("address")):[];l.push(JSON.stringify(s)),s.processing=!0,localStorage.setItem("address",JSON.stringify(l)),s.processing=!1,window.location.href="/address-guest"}return(l,i)=>(d(),a("div",null,[r(e(I),null,{default:m(()=>[t("title",null,p(e(v).metaTitle),1),t("meta",{"head-key":"description",name:"description",content:e(v).metaDescription},null,8,W),t("meta",{"head-key":"keyword",name:"keyword",content:e(v).metaKeyword},null,8,X)]),_:1}),r(J),r(j),t("div",Y,[t("div",Z,[t("div",tt,[t("div",et,[t("div",st,[t("div",ot,[it,r(e(V),{href:l.route("address-guest.index"),class:"btn btn-sm btn-outline-secondary"},{default:m(()=>[lt,f("Kembali ")]),_:1},8,["href"])]),t("form",{onSubmit:O(K,["prevent"])},[t("div",nt,[at,t("div",rt,[t("div",ct,[r(e(Q),{modelValue:e(b).zoom,"onUpdate:modelValue":i[0]||(i[0]=o=>e(b).zoom=o),zoom:e(b).zoom,"onUpdate:zoom":i[1]||(i[1]=o=>e(b).zoom=o),center:[e(s).latitude,e(s).longitude],onClick:N},{default:m(()=>[r(e(H),{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),r(e(T),{position:"topright"},{default:m(()=>[t("input",{onKeyup:L,type:"text",placeholder:"Cari...",style:{width:"100%"}},null,32),e(n).searchAddress.length>0?(d(),a("div",ut,[t("div",mt,[(d(!0),a(g,null,h(e(n).searchAddress,(o,u)=>(d(),a("p",{style:{cursor:"pointer"},key:u,onClick:Yt=>q(o.y,o.x)},p(o.label),9,_t))),128)),e(n).searchAddress<1?(d(),a("p",pt," Alamat tidak ditemukan ")):k("",!0)])])):k("",!0)]),_:1}),r(e(F),{"lat-lng":[e(s).latitude,e(s).longitude],draggable:"",onMoveend:A},{default:m(()=>[r(e(G),null,{default:m(()=>[f(p(`Lat: ${e(s).latitude} Lng: ${e(s).longitude}`),1)]),_:1})]),_:1},8,["lat-lng"])]),_:1},8,["modelValue","zoom","center"])])]),t("div",bt,[t("div",gt,[ht,c(t("input",{class:"form-control",id:"longitude","onUpdate:modelValue":i[2]||(i[2]=o=>e(s).longitude=o),disabled:""},null,512),[[_,e(s).longitude]])])]),t("div",ft,[t("div",vt,[yt,c(t("input",{class:"form-control",id:"latitude","onUpdate:modelValue":i[3]||(i[3]=o=>e(s).latitude=o),disabled:""},null,512),[[_,e(s).latitude]])])]),t("div",St,[t("div",kt,[wt,c(t("input",{class:"form-control",id:"receiver","onUpdate:modelValue":i[4]||(i[4]=o=>e(s).receiver=o)},null,512),[[_,e(s).receiver]])])]),t("div",xt,[t("div",Vt,[$t,c(t("input",{class:"form-control",id:"sender","onUpdate:modelValue":i[5]||(i[5]=o=>e(s).phone=o)},null,512),[[_,e(s).phone]])])]),t("div",Ct,[Ut,c(t("select",{class:"form-control mb-3","onUpdate:modelValue":i[6]||(i[6]=o=>e(s).province_id=o),id:"province_id",onChange:i[7]||(i[7]=o=>e(w)(e(s).province_id))},[(d(!0),a(g,null,h(e(n).provinces,(o,u)=>(d(),a("option",{value:o.id,key:u},p(o.name),9,zt))),128))],544),[[S,e(s).province_id]])]),t("div",At,[Nt,c(t("select",{class:"form-control mb-3","onUpdate:modelValue":i[8]||(i[8]=o=>e(s).city_id=o),id:"city_id",onChange:i[9]||(i[9]=o=>e(x)(e(s).city_id))},[(d(!0),a(g,null,h(e(n).cities,(o,u)=>(d(),a("option",{value:o.id,key:u},p(o.name),9,Lt))),128))],544),[[S,e(s).city_id]])]),t("div",qt,[Kt,c(t("select",{class:"form-control mb-3","onUpdate:modelValue":i[10]||(i[10]=o=>e(s).subdistrict_id=o),id:"subdistrict_id",onChange:i[11]||(i[11]=o=>e(U)(e(s).subdistrict_id))},[(d(!0),a(g,null,h(e(n).subdistricts,(o,u)=>(d(),a("option",{value:o.id,key:u},p(o.name),9,Pt))),128))],544),[[S,e(s).subdistrict_id]])]),t("div",Mt,[t("div",Ot,[Dt,c(t("input",{class:"form-control",id:"postal_code","onUpdate:modelValue":i[12]||(i[12]=o=>e(s).postal_code=o)},null,512),[[_,e(s).postal_code]])])]),t("div",It,[t("div",Jt,[jt,c(t("textarea",{class:"form-control",id:"detail",rows:"3","onUpdate:modelValue":i[13]||(i[13]=o=>e(s).detail=o)},null,512),[[_,e(s).detail]])])]),t("div",Bt,[t("div",Et,[t("button",{class:"btn btn-success rounded-custom",disabled:e(s).processing},[t("div",Tt,[e(s).processing?(d(),D(E,{key:0,color:"text-white",size:"sm",me:"me-2"})):k("",!0),Ft])],8,Ht)])]),t("div",Gt,[t("div",Qt,[r(e(V),{href:l.route("address-guest.index"),class:"btn btn-outline-secondary rounded-custom"},{default:m(()=>[Rt,f("Kembali ")]),_:1},8,["href"])])])])],40,dt)])])])])]),Wt,r(B)]))}};export{le as default};
