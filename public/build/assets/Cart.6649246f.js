import{C as L,D as V,h as w,U as N,J as q,V as y,f as a,b as g,w as P,u as r,a as e,F as M,l as $,e as R,E as O,j as k,t as n,k as C,z as j,o as l,H as U,L as J,n as h,q as Q,W as x}from"./app.f44fd58a.js";import{_ as W}from"./Header.4c1dd64d.js";import{S as G}from"./Sidebar.a117b27c.js";import{_ as X}from"./Footer.9f8e4ee4.js";import Y from"./AddressModal.901a729a.js";import Z from"./CourierModal.6ade99d4.js";const ee=["content"],se=["content"],te=e("div",{class:"toast pwa-install-alert shadow bg-white",role:"alert","aria-live":"assertive","aria-atomic":"true","data-bs-delay":"5000","data-bs-autohide":"true"},[e("div",{class:"toast-body"},[e("div",{class:"content d-flex align-items-center mb-2"},[e("img",{src:"img/icons/icon-72x72.png",alt:""}),e("h6",{class:"mb-0"},"Add to Home Screen"),e("button",{class:"btn-close ms-auto",type:"button","data-bs-dismiss":"toast","aria-label":"Close"})]),e("span",{class:"mb-0 d-block"},[C("Add Suha on your mobile home screen. Click the"),e("strong",{class:"mx-1"},"Add to Home Screen"),C("button & enjoy it like a regular app.")])])],-1),oe={class:"page-content-wrapper",style:{"min-height":"100"}},ae={class:"container"},le={key:0,class:"cart-wrapper-area py-3 text-center"},ne=e("div",{class:"alert alert-danger",role:"alert"},[e("i",{class:"fa fa-cart-plus fa-3x mb-3"}),e("br"),e("div",{class:"h6 fw-bold"},"Cart kamu kosong!")],-1),ie=[ne],ce={key:1,class:"py-3"},de={class:"card p-0"},re={class:"card-body"},_e={class:"col-2"},ue={key:0,class:"rounded",src:"img/product/11.png",alt:""},he=["src"],pe={class:"col-8"},me={class:"text-muted text-decoration-line-through me-2 small"},ye={class:"text-dark small"},ge={class:"d-flex justify-content-start align-items-center p-0 my-3"},fe=["onClick"],be={class:"mx-2"},ve=["onClick"],ke={class:"col-2 text-end"},xe=["onClick"],Ce=e("i",{class:"lni lni-cross-circle text-danger"},null,-1),we=[Ce],Me={class:"col-12 mb-3"},$e={class:"row"},Se={class:"col-12 d-flex justify-content-between"},je=e("span",{class:"fw-bold"}," Dikirim ke :",-1),Be=["data-bs-target","aria-controls"],De=e("i",{class:"lni lni-pencil text-warning"},null,-1),Te=[De],Ve={class:"col-12 small text-muted"},qe={class:"col-12 mb-3"},Pe={class:"row"},Ae={class:"col-12 d-flex justify-content-between"},Ee=e("span",{class:"fw-bold"}," Kurir :",-1),Fe=["data-bs-target","aria-controls"],Ie=e("i",{class:"lni lni-pencil text-warning"},null,-1),ze=[Ie],He={key:0,class:"col-12 small text-muted"},Ke={class:"small"},Le={class:"small"},Ne={class:"small"},Re={class:"small"},Oe={class:"small"},Ue={key:1,class:"col-12 small text-muted"},Je=e("span",{class:"text-danger blink"},"Belum memilih kurir",-1),Qe=[Je],We={class:"row mb-3"},Ge=e("div",{class:"col-12"},[e("h6",{class:"fw-bold mb-0"},"Voucher"),e("p",{class:"mb-2"}," Masukkan kode voucher dan dapatkan diskon ")],-1),Xe={class:"col-12"},Ye={class:"input-group mb-3"},Ze=["disabled"],es={key:0,class:"lni lni-checkmark"},ss={key:1,class:"spinner-border spinner-border-sm text-light",role:"status"},ts=e("span",{class:"visually-hidden"},"Loading...",-1),os=[ts],as={key:0,class:"small text-muted blink"},ls={key:1,class:"small text-success"},ns={class:"row mb-3"},is=e("div",{class:"col-12"},[e("h6",{class:"fw-bold mb-0"},"Pembayaran"),e("p",{class:"mb-2"}," Pilih metode pembayaran yang kamu inginkan ")],-1),cs={class:"col-12"},ds={class:"list-group"},rs={key:0,class:"list-group-item small border-danger"},_s=e("span",{class:"small blink text-danger"},"Sedang memuat metode pembayaran...",-1),us=[_s],hs={key:1,class:"list-group-item small border-danger small text-danger"},ps={key:0,class:"list-group"},ms=["href","aria-controls"],ys=e("i",{class:"lni lni-chevron-right"},null,-1),gs=["id"],fs={key:0,class:"row"},bs=["onClick"],vs={key:1,class:"row"},ks=["onClick"],xs=e("div",{class:"col-12 mt-3"},[e("hr")],-1),Cs={class:"row"},ws={class:"col-12 d-flex justify-content-between"},Ms=e("span",{class:"small fw-bold"},"Metode Pembayaran",-1),$s={key:0,class:"small text-success text-uppercase"},Ss={key:1,class:"small text-danger"},js={class:"col-12 d-flex justify-content-between"},Bs=e("span",{class:"small fw-bold"},"Voucher",-1),Ds={class:"small text-success"},Ts={class:"col-12 d-flex justify-content-between"},Vs=e("span",{class:"small fw-bold"},"Ongkos Kirim ",-1),qs={class:"small text-muted text-decoration-line-through"},Ps={class:"col-12 d-flex justify-content-between"},As=e("span",{class:"small fw-bold"},"Total",-1),Es={class:"text-success fw-bold"},Fs={class:"col-12 mb-3 d-flex justify-content-between"},Is=e("span",{class:"small fw-bold"},"Hemat",-1),zs={class:"small text-muted text-decoration-line-through"},Hs=e("i",{class:"lni lni-postcard me-2"},null,-1),Ks=e("div",{class:"internet-connection-status",id:"internetStatus"},null,-1),Qs={__name:"Cart",props:{meta_title:String,meta_description:String,meta_keyword:String},setup(A){const S=A;let f=L(),_=V({code:"",data:null,loading:!1});const E=w(S.meta_title),F=w(S.meta_description),I=w(S.meta_keyword),p=w(0),t=V({data:[],selected:{paymentMethod:null,paymentChannel:null,fee:0,feeType:0},loading:!1});N(()=>{t.loading=!0,q.get("/api/orders/list-payment-method").then(o=>{t.data=o.data.data,t.loading=!1}).catch(o=>{t.loading=!1,y(o)})});function B(o,d){let s=o.qty+d;if(s==0){y("Kuantitas tidak boleh 0");return}if(s>o.product.stock){y("Stok tidak mencukupi");return}_.code="",_.data=null,p.value=0,j.Inertia.put(route("cart.update",o.id),{user_address_id:o.user_address_id,user_id:o.user_id,product_id:o.product_id,qty:o.qty+d,courier:null,shipping_cost:null,shipping_etd:null,shipping_service:null},{_method:"put"})}function b(){let o=0,d=0,s=0;return f.carts.forEach(i=>{var T;let c=i.product.strike_price,u=parseInt(i.product.price),m=parseInt(i.qty),v=parseInt((T=i.shipping_cost)!=null?T:0);o+=u*m+v,d+=c*m+v,s+=v}),o-=p.value,{res:o,strikeRes:d,shippingCost:s}}function z(o){j.Inertia.delete(route("cart.destroy",o),{_method:"delete"})}function D(o,d){var c,u,m,v;let s=t.data[o],i=null;s.Code=="va"?i=s.Channels[d]:i=s.PaymentMethod[d],t.selected.paymentMethod=s.Code,t.selected.paymentChannel=i.Code,t.selected.fee=(u=(c=i.TransactionFee)==null?void 0:c.ActualFee)!=null?u:0,t.selected.feeType=(v=(m=i.TransactionFee)==null?void 0:m.ActualFeeType)!=null?v:0}function H(){_.loading=!0,q.post("/api/vouchers/check",{code:_.code,total:b().res}).then(o=>{_.data=o.data.data,p.value=b().res*o.data.data.discount/100,_.loading=!1}).catch(o=>{y(o.response.data.message),_.loading=!1})}function K(){var o;if(!t.selected.paymentMethod||!t.selected.paymentChannel)return y("Belum memilih metode pembayaran"),!1;f.carts.forEach(d=>{if("".includes[d.courier,d.shipping_cost,d.shipping_etd,d.shipping_service])return y("Belum memilih kurir"),!1;if("".includes[d.user_address_id])return y("Belum memilih alamat pengiriman"),!1}),j.Inertia.post(route("orders.store"),{carts:f.carts,payment_method:t.selected,voucher_code:(o=_.data)==null?void 0:o.code,voucher:p.value,total:b()},{_method:"post"})}return(o,d)=>(l(),a("div",null,[g(r(U),null,{default:P(()=>[e("title",null,n(E.value),1),e("meta",{"head-key":"description",name:"description",content:F.value},null,8,ee),e("meta",{"head-key":"keyword",name:"keyword",content:I.value},null,8,se)]),_:1}),g(W),g(G),te,e("div",oe,[e("div",ae,[r(f).carts.length<=0?(l(),a("div",le,ie)):(l(),a("div",ce,[e("div",de,[e("div",re,[(l(!0),a(M,null,$(r(f).carts,(s,i)=>(l(),a("div",{class:"row mb-3",key:i},[g(Y,{user_addresses:r(f).user_addresses,cart:s},null,8,["user_addresses","cart"]),g(Z,{cart:s},null,8,["cart"]),e("div",_e,[s.product.files.length<=0?(l(),a("img",ue)):(l(),a("img",{key:1,class:"rounded",src:s.product.files[0].src,alt:""},null,8,he))]),e("div",pe,[g(r(J),{class:"product-title d-block",href:o.route("product.show",{slug:s.product.slug})},{default:P(()=>[C(n(s.product.name),1)]),_:2},1032,["href"]),e("span",me,n(s.product.strike_price_rp),1),e("span",ye,n(s.product.price_rp),1),e("div",ge,[e("i",{onClick:c=>B(s,-1),class:h("lni lni-circle-minus text-danger"),style:{"font-size":"20px"}},null,8,fe),e("span",be,n(s.qty)+" pcs",1),e("i",{onClick:c=>B(s,1),class:h("lni lni-circle-plus text-primary"),style:{"font-size":"20px"}},null,8,ve)])]),e("div",ke,[e("a",{href:"#",onClick:Q(c=>z(s.id),["prevent"]),style:{"font-size":"20px"}},we,8,xe)]),e("div",Me,[e("div",$e,[e("div",Se,[je,e("a",{href:"#","data-bs-toggle":"offcanvas","data-bs-target":`#addressModal${s.id}`,"aria-controls":`addressModal${s.id}`,style:{"align-items":"center"}},Te,8,Be)]),e("div",Ve,n(`${s.user_address.subdistrict.name}, ${s.user_address.subdistrict.city.name}, ${s.user_address.subdistrict.city.province.name}, ${s.user_address.postal_code}`),1)])]),e("div",qe,[e("div",Pe,[e("div",Ae,[Ee,e("a",{href:"#","data-bs-toggle":"offcanvas","data-bs-target":`#courierModal${s.id}`,"aria-controls":`courierModal${s.id}`,style:{"align-items":"center"}},ze,8,Fe)]),s.courier||s.shipping_service||s.shipping_cost||s.shipping_etd?(l(),a("div",He,[e("p",Ke,n(s.courier),1),e("p",Le,n(s.shipping_service),1),e("p",Ne," Rp. "+n(s.shipping_cost),1),e("p",Re,n(s.shipping_etd)+" hari ",1),e("p",Oe,n(s.qty)+" pcs ",1)])):(l(),a("div",Ue,Qe))])])]))),128)),e("div",We,[Ge,e("div",Xe,[e("div",Ye,[R(e("input",{class:"form-control",placeholder:"KODE","onUpdate:modelValue":d[0]||(d[0]=s=>r(_).code=s)},null,512),[[O,r(_).code]]),e("button",{class:"btn btn-success",onClick:H,disabled:r(_).code==""||r(_).loading},[r(_).loading?(l(),a("div",ss,os)):(l(),a("i",es))],8,Ze)]),r(_).loading?(l(),a("span",as,"Cek voucher...")):k("",!0),p.value>0?(l(),a("span",ls,"Mendapat potongan sebesar "+n(r(x)(p.value)),1)):k("",!0)])]),e("div",ns,[is,e("div",cs,[e("ul",ds,[t.loading?(l(),a("li",rs,us)):k("",!0),!t.loading&&t.data.length==0?(l(),a("li",hs," Metode pembayaran tidak ditemukan ")):k("",!0)]),!t.loading&&t.data.length>0?(l(),a("ul",ps,[(l(!0),a(M,null,$(t.data,(s,i)=>(l(),a("li",{class:"list-group-item small",key:i},[e("a",{"data-bs-toggle":"collapse",href:`#collapse-pm-${i}`,role:"button","aria-expanded":"false","aria-controls":`collapse-pm-${i}`,class:"text-decoration-none text-dark d-flex justify-content-between align-items-center"},[C(n(s.Description)+" ",1),ys],8,ms),e("div",{class:"collapse pt-3",id:`collapse-pm-${i}`},[s.Code!="va"?(l(),a("div",fs,[(l(!0),a(M,null,$(s.PaymentMethod,(c,u)=>(l(),a("div",{class:"col-6 mb-3",key:u},[e("div",{class:h(`rounded text-center border py-2 ${t.selected.paymentMethod==s.Code&&t.selected.paymentChannel==c.Code?"border-success":""}`),onClick:m=>D(i,u)},[e("div",{class:h(`h6 one-line fw-bold text-uppercase ${t.selected.paymentMethod==s.Code&&t.selected.paymentChannel==c.Code?"text-success":"opacity-25"}`)},n(c.Code),3),e("span",{class:h(`small one-line ${t.selected.paymentMethod==s.Code&&t.selected.paymentChannel==c.Code?"text-success":"opacity-25"}`)},n(c.Description),3)],10,bs)]))),128))])):(l(),a("div",vs,[(l(!0),a(M,null,$(s.Channels,(c,u)=>(l(),a("div",{class:"col-6 mb-3",key:u},[e("div",{class:h(`rounded text-center border py-2 ${t.selected.paymentMethod==s.Code&&t.selected.paymentChannel==c.Code?"border-success":""}`),onClick:m=>D(i,u)},[e("div",{class:h(`h6 one-line fw-bold text-uppercase ${t.selected.paymentMethod==s.Code&&t.selected.paymentChannel==c.Code?"text-success":"opacity-25"}`)},n(c.Code),3),e("span",{class:h(`small one-line ${t.selected.paymentMethod==s.Code&&t.selected.paymentChannel==c.Code?"text-success":"opacity-25"}`)},n(c.Description),3)],10,ks)]))),128))]))],8,gs)]))),128))])):k("",!0)]),xs]),e("div",Cs,[e("div",ws,[Ms,t.selected.paymentMethod&&t.selected.paymentChannel?(l(),a("span",$s,n(t.selected.paymentMethod)+"("+n(t.selected.paymentChannel)+")",1)):(l(),a("span",Ss,"Belum memilih"))]),e("div",js,[Bs,e("span",Ds,n(r(x)(p.value)),1)]),e("div",Ts,[Vs,e("span",qs,n(r(x)(b().shippingCost)),1)]),e("div",Ps,[As,e("span",Es,n(r(x)(b().res)),1)]),e("div",Fs,[Is,e("span",zs,n(r(x)(b().strikeRes)),1)]),e("div",{class:"col-12"},[e("div",{class:"d-grid"},[e("button",{class:"btn btn-success btn-sm",onClick:K},[Hs,C("Checkout ")])])])])])])]))])]),Ks,g(X)]))}};export{Qs as default};
